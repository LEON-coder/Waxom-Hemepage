"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ItcSimpleSlider=function(){function a(t,e){_classCallCheck(this,a),this._el="string"==typeof t?document.querySelector(t):t,this._elWrapper=this._el.querySelector(a.SELECTOR_WRAPPER),this._elItems=this._el.querySelector(a.SELECTOR_ITEMS),this._elsItem=this._el.querySelectorAll(a.SELECTOR_ITEM),this._currentIndex=0,this._minOrder=0,this._maxOrder=0,this._$itemWithMinOrder=null,this._$itemWithMaxOrder=null,this._minTranslate=0,this._maxTranslate=0,this._direction="next",this._balancingItemsFlag=!1,this._transform=0,this._width=this._elWrapper.getBoundingClientRect().width,this._supportResizeObserver=void 0!==window.ResizeObserver,this._hasSwipeState=!1,this._swipeStartPosX=0,this._intervalId=null,this._config=Object.assign({autoplay:!1,loop:!0,indicators:!0,interval:5e3,swipe:!0},e),this._elItems.dataset.translate=0,this._elsItem.forEach(function(t,e){t.dataset.order=e,t.dataset.index=e,t.dataset.translate=0}),this._config.loop&&(t=this._elsItem.length-1,e=-this._elsItem.length,this._elsItem[t].dataset.order=-1,this._elsItem[t].dataset.translate=-this._elsItem.length,e=e*this._width,this._elsItem[t].style.transform="translateX(".concat(e,"px)")),this._addIndicators(),this._refreshExtremeValues(),this._setActiveClass(),this._addEventListener(),this._autoplay()}return _createClass(a,[{key:"_setActiveClass",value:function(){var t=this._el.querySelector(a.SELECTOR_ITEM_ACTIVE),t=(t&&t.classList.remove(a.CLASS_NAME_ITEM_ACTIVE),this._el.querySelector('[data-index="'.concat(this._currentIndex,'"]'))),t=(t&&t.classList.add(a.CLASS_NAME_ITEM_ACTIVE),this._el.querySelector(a.SELECTOR_INDICATOR_ACTIVE)),t=(t&&t.classList.remove(a.CLASS_NAME_INDICATOR_ACTIVE),this._el.querySelector('[data-slide-to="'.concat(this._currentIndex,'"]'))),t=(t&&t.classList.add(a.CLASS_NAME_INDICATOR_ACTIVE),this._el.querySelector(a.SELECTOR_CONTROL_PREV)),e=this._el.querySelector(a.SELECTOR_CONTROL_NEXT);t&&t.classList.add(a.CLASS_NAME_CONTROL_SHOW),e&&e.classList.add(a.CLASS_NAME_CONTROL_SHOW),this._config.loop||0!==this._currentIndex?this._config.loop||this._currentIndex!==this._elsItem.length-1||e.classList.remove(a.CLASS_NAME_CONTROL_SHOW):t.classList.remove(a.CLASS_NAME_CONTROL_SHOW),this._el.dispatchEvent(new CustomEvent("active.itc.slider",{bubbles:!0}))}},{key:"_move",value:function(t){var e;if(this._elItems.classList.remove(a.TRANSITION_NONE),!1===t&&this._elItems.classList.add(a.TRANSITION_NONE),"none"===this._direction)return e=this._transform*this._width,void(this._elItems.style.transform="translateX(".concat(e,"px)"));if(!this._config.loop){if(this._currentIndex+1>=this._elsItem.length&&"next"===this._direction)return void this._autoplay("stop");if(this._currentIndex<=0&&"prev"===this._direction)return}t="next"===this._direction?-1:1,t=this._transform+t;"next"===this._direction?++this._currentIndex>this._elsItem.length-1&&(this._currentIndex-=this._elsItem.length):--this._currentIndex<0&&(this._currentIndex+=this._elsItem.length),this._transform=t,e=(this._elItems.dataset.translate=t)*this._width,this._elItems.style.transform="translateX(".concat(e,"px)"),this._elItems.dispatchEvent(new CustomEvent("transition-start",{bubbles:!0})),this._setActiveClass()}},{key:"_moveTo",value:function(t,e){var i=this._currentIndex;this._direction=i<t?"next":"prev";for(var s=0;s<Math.abs(t-i);s++)this._move(e)}},{key:"_autoplay",value:function(t){var e=this;if(this._config.autoplay)return"stop"===t?(clearInterval(this._intervalId),void(this._intervalId=null)):void(null===this._intervalId&&(this._intervalId=setInterval(function(){e._direction="next",e._move()},this._config.interval)))}},{key:"_addIndicators",value:function(){if(!this._el.querySelector(a.SELECTOR_INDICATORS)&&this._config.indicators){for(var t="",e=0,i=this._elsItem.length;e<i;e++)t+='<li class="'.concat(a.CLASS_NAME_INDICATOR,'" data-slide-to="').concat(e,'"></li>');this._el.insertAdjacentHTML("beforeend",'<ol class="'.concat(a.CLASS_NAME_INDICATORS,'">').concat(t,"</ol>"))}}},{key:"_refreshExtremeValues",value:function(){this._minOrder=parseInt(this._elsItem[0].dataset.order,10),this._maxOrder=this._minOrder,this._$itemWithMinOrder=this._elsItem[0],this._$itemWithMaxOrder=this._$itemWithMinOrder,this._minTranslate=parseInt(this._elsItem[0].dataset.translate,10),this._maxTranslate=this._minTranslate;for(var t=0,e=this._elsItem.length;t<e;t++){var i=this._elsItem[t],s=parseInt(i.dataset.order,10);s<this._minOrder?(this._minOrder=s,this._$itemWithMinOrder=i,this._minTranslate=parseInt(i.dataset.translate,10)):s>this._maxOrder&&(this._maxOrder=s,this._$itemWithMaxOrder=i,this._maxTranslate=parseInt(i.dataset.translate,10))}}},{key:"_balancingItems",value:function(){var t,e,i,s,n,r,a;this._balancingItemsFlag&&(e=(t=this._elWrapper.getBoundingClientRect()).width/2,i=this._elsItem.length,"next"===this._direction?(r=t.left,a=this._$itemWithMinOrder,n=this._minTranslate,a.getBoundingClientRect().right<r-e&&(a.dataset.order=this._minOrder+i,s=(a.dataset.translate=n+=i)*this._width,a.style.transform="translateX(".concat(s,"px)"),this._refreshExtremeValues())):"prev"===this._direction&&(r=t.right,a=this._$itemWithMaxOrder,n=this._maxTranslate,a.getBoundingClientRect().left>r+e&&(a.dataset.order=this._maxOrder-i,s=(a.dataset.translate=n-=i)*this._width,a.style.transform="translateX(".concat(s,"px)"),this._refreshExtremeValues())),requestAnimationFrame(this._balancingItems.bind(this)))}},{key:"_addEventListener",value:function(){var t=this._elItems;function e(t){this._autoplay("stop"),t.target.closest(".".concat(a.CLASS_NAME_CONTROL))||(t=0===t.type.search("touch")?t.touches[0]:t,this._swipeStartPosX=t.clientX,this._swipeStartPosY=t.clientY,this._hasSwipeState=!0,this._hasSwiping=!1)}function i(t){if(this._hasSwipeState){var e=0===t.type.search("touch")?t.touches[0]:t,i=this._swipeStartPosX-e.clientX,e=this._swipeStartPosY-e.clientY;if(!this._hasSwiping){if(Math.abs(e)>Math.abs(i)||0===Math.abs(i))return void(this._hasSwipeState=!1);this._hasSwiping=!0}t.preventDefault(),this._config.loop||(e=this._currentIndex+1>=this._elsItem.length&&0<=i,t=this._currentIndex<=0&&i<=0,(e||t)&&(i/=4)),this._width=this._elWrapper.getBoundingClientRect().width,this._elItems.classList.add(a.TRANSITION_NONE);e=this._transform*this._width-i;this._elItems.style.transform="translateX(".concat(e,"px)")}}function s(t){var e,i;this._hasSwipeState&&(t=0===t.type.search("touch")?t.changedTouches[0]:t,0===(t=this._swipeStartPosX-t.clientX)?this._hasSwipeState=!1:(this._config.loop||(i=this._currentIndex+1>=this._elsItem.length&&0<=t,e=this._currentIndex<=0&&t<=0,(i||e)&&(t=0)),i=t/this._elWrapper.getBoundingClientRect().width*100,this._elItems.classList.remove(a.TRANSITION_NONE),this._direction=a.SWIPE_THRESHOLD<i?"next":i<-a.SWIPE_THRESHOLD?"prev":"none",this._move(),this._hasSwipeState=!1,this._config.loop&&this._autoplay()))}this._el.addEventListener("click",function(t){var e=t.target;this._autoplay("stop"),e.classList.contains(a.CLASS_NAME_CONTROL)?(t.preventDefault(),this._direction=e.dataset.slide,this._move()):e.dataset.slideTo&&(t.preventDefault(),t=parseInt(e.dataset.slideTo,10),this._moveTo(t)),this._config.loop&&this._autoplay()}.bind(this)),this._config.loop&&(t.addEventListener("transition-start",function(){this._balancingItemsFlag||(this._balancingItemsFlag=!0,window.requestAnimationFrame(this._balancingItems.bind(this)))}.bind(this)),t.addEventListener("transitionend",function(){this._balancingItemsFlag=!1,this._el.dispatchEvent(new CustomEvent("transition-end",{bubbles:!0}))}.bind(this))),this._config.autoplay&&(this._el.addEventListener("mouseenter",function(){this._autoplay("stop")}.bind(this)),this._el.addEventListener("mouseleave",function(){this._config.loop&&this._autoplay()}.bind(this))),this._config.swipe&&(t=!!a.checkSupportPassiveEvents()&&{passive:!1},this._el.addEventListener("touchstart",e.bind(this),t),this._el.addEventListener("touchmove",i.bind(this),t),this._el.addEventListener("mousedown",e.bind(this)),this._el.addEventListener("mousemove",i.bind(this)),document.addEventListener("touchend",s.bind(this)),document.addEventListener("mouseup",s.bind(this)),document.addEventListener("mouseout",s.bind(this))),this._el.addEventListener("dragstart",function(t){t.preventDefault()}.bind(this)),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState?this._autoplay("stop"):"visible"===document.visibilityState&&this._config.loop&&this._autoplay()}.bind(this)),this._supportResizeObserver&&new ResizeObserver(function(t){var e,i=t[0].contentBoxSize,t=t[0].contentRect,s=t?t.width:(i[0]||i).inlineSize;if(this._width.toFixed(1)!==s.toFixed(1)){this._autoplay("stop"),this._elItems.classList.add(a.TRANSITION_NONE),this._width=parseInt(s.toFixed(1),10),e=s*parseInt(this._elItems.dataset.translate,10),this._elItems.style.transform="translateX(".concat(e,"px)");for(var n=this._elsItem,r=0;r<n.length;r++)e=parseInt(n[r].dataset.translate,10)*s,n[r].style.transform="translateX(".concat(e,"px)");this._config.loop&&this._autoplay()}}.bind(this)).observe(this._elWrapper)}},{key:"next",value:function(){this._direction="next",this._move()}},{key:"prev",value:function(){this._direction="prev",this._move()}},{key:"autoplay",value:function(){this._autoplay("stop")}},{key:"moveTo",value:function(t,e){this._moveTo(t,e)}}],[{key:"checkSupportPassiveEvents",value:function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveListener",null,e),window.removeEventListener("testPassiveListener",null,e)}catch(e){t=!1}return t}}]),a}();_defineProperty(ItcSimpleSlider,"PREFIX","itcss"),_defineProperty(ItcSimpleSlider,"CLASS_NAME_ITEM","".concat(ItcSimpleSlider.PREFIX,"__item")),_defineProperty(ItcSimpleSlider,"CLASS_NAME_ITEM_ACTIVE","".concat(ItcSimpleSlider.PREFIX,"__item_active")),_defineProperty(ItcSimpleSlider,"CLASS_NAME_ITEMS","".concat(ItcSimpleSlider.PREFIX,"__items")),_defineProperty(ItcSimpleSlider,"CLASS_NAME_INDICATOR","".concat(ItcSimpleSlider.PREFIX,"__indicator")),_defineProperty(ItcSimpleSlider,"CLASS_NAME_INDICATOR_ACTIVE","".concat(ItcSimpleSlider.PREFIX,"__indicator_active")),_defineProperty(ItcSimpleSlider,"CLASS_NAME_INDICATORS","".concat(ItcSimpleSlider.PREFIX,"__indicators")),_defineProperty(ItcSimpleSlider,"CLASS_NAME_CONTROL","".concat(ItcSimpleSlider.PREFIX,"__control")),_defineProperty(ItcSimpleSlider,"CLASS_NAME_CONTROL_PREV","".concat(ItcSimpleSlider.PREFIX,"__control_prev")),_defineProperty(ItcSimpleSlider,"CLASS_NAME_CONTROL_NEXT","".concat(ItcSimpleSlider.PREFIX,"__control_next")),_defineProperty(ItcSimpleSlider,"CLASS_NAME_CONTROL_SHOW","".concat(ItcSimpleSlider.PREFIX,"__control_show")),_defineProperty(ItcSimpleSlider,"SELECTOR_ITEMS",".".concat(ItcSimpleSlider.CLASS_NAME_ITEMS)),_defineProperty(ItcSimpleSlider,"SELECTOR_ITEM",".".concat(ItcSimpleSlider.CLASS_NAME_ITEM)),_defineProperty(ItcSimpleSlider,"SELECTOR_ITEM_ACTIVE",".".concat(ItcSimpleSlider.CLASS_NAME_ITEM_ACTIVE)),_defineProperty(ItcSimpleSlider,"SELECTOR_INDICATOR_ACTIVE",".".concat(ItcSimpleSlider.CLASS_NAME_INDICATOR_ACTIVE)),_defineProperty(ItcSimpleSlider,"SELECTOR_INDICATORS",".".concat(ItcSimpleSlider.CLASS_NAME_INDICATORS)),_defineProperty(ItcSimpleSlider,"SELECTOR_WRAPPER",".".concat(ItcSimpleSlider.PREFIX,"__wrapper")),_defineProperty(ItcSimpleSlider,"SELECTOR_CONTROL",".".concat(ItcSimpleSlider.CLASS_NAME_CONTROL)),_defineProperty(ItcSimpleSlider,"SELECTOR_CONTROL_NEXT",".".concat(ItcSimpleSlider.CLASS_NAME_CONTROL_NEXT)),_defineProperty(ItcSimpleSlider,"SELECTOR_CONTROL_PREV",".".concat(ItcSimpleSlider.CLASS_NAME_CONTROL_PREV)),_defineProperty(ItcSimpleSlider,"SWIPE_THRESHOLD",20),_defineProperty(ItcSimpleSlider,"TRANSITION_NONE","transition-none");